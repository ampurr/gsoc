<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.475">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="J. Chen">

<title>animint2 GSOC Examination</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/quarto.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="index_files/libs/quarto-html/anchor.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="index_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="index_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

<script src="index_files/libs/kePrint-0.0.1/kePrint.js"></script>
<link href="index_files/libs/lightable-0.0.1/lightable.css" rel="stylesheet">

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="changes.css">
</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Contents:</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#easy-test-personalities-by-country" id="toc-easy-test-personalities-by-country" class="nav-link" data-scroll-target="#easy-test-personalities-by-country">Easy Test: Personalities By Country</a>
  <ul class="collapse">
  <li><a href="#data-wrangling" id="toc-data-wrangling" class="nav-link" data-scroll-target="#data-wrangling">Data Wrangling</a></li>
  <li><a href="#big-five-data-viz" id="toc-big-five-data-viz" class="nav-link" data-scroll-target="#big-five-data-viz">Big Five Data Viz</a></li>
  <li><a href="#interacting-with-personality" id="toc-interacting-with-personality" class="nav-link" data-scroll-target="#interacting-with-personality">Interacting with Personality</a></li>
  <li><a href="#sibling-rivalry" id="toc-sibling-rivalry" class="nav-link" data-scroll-target="#sibling-rivalry">Sibling Rivalry</a></li>
  </ul></li>
  <li><a href="#sec-observations" id="toc-sec-observations" class="nav-link" data-scroll-target="#sec-observations">Appendix: Observations</a></li>
  <li><a href="#appendix-mistakes" id="toc-appendix-mistakes" class="nav-link" data-scroll-target="#appendix-mistakes">Appendix: Mistakes</a>
  <ul class="collapse">
  <li><a href="#easy-test" id="toc-easy-test" class="nav-link" data-scroll-target="#easy-test">Easy Test</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
</div>
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">animint2 GSOC Examination</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>J. Chen </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="introduction" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Hello! If you’re reading this, you’re probably Toby Dylan Hocking, Faizan Khan, or someone else who’s applying to GSOC 2023. (And if you’re in the latter group, best of luck!)</p>
<div class="page-columns page-full"><p>Why am I applying to work on <code>animint2</code>? In my field of expertise—network psychometrics—an <a href="https://ccl.northwestern.edu/netlogo/models/community/Vulnerability_To_Depression">interactive model of depression</a> led to the discovery of hysteresis in symptom networks. Later on, this became a crucial component of network theory.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> So I’ve become an enthusiast for interactive models and visualizations in science.</p><div class="no-row-height column-margin column-container"><li id="fn1"><p><sup>1</sup>&nbsp;D. Borsboom. <a href="https://onlinelibrary.wiley.com/doi/full/10.1002/wps.20375">A network theory of mental disorders</a>. <em>World Psychiatry</em>. 2017.</p></li></div></div>
<div class="page-columns page-full"><p>If I’m lucky, I hope to spend my summer improving <code>animint2</code>. I’m especially interested in writing and editing documentation. But I’m comfortable doing whatever has priority. </p><div class="no-row-height column-margin column-container"><span class="">Of course, my super top secret reason for doing this is so I can maybe eventually publish a paper with Toby and bump my Erdős number down to a 4. But shhhh. That’s just between you and me.</span></div></div>
<p>Here’s my <code>.qmd</code> file, if you’d prefer to look at it directly. And here’s my repository.</p>
<p>Lastly, there’s been an explosion of AI tools this year. I hereby certify that I haven’t used them for any of my writing or code. In fact, I haven’t used them at all.</p>
<p>All right. Onto the tests.</p>
</section>
<section id="easy-test-personalities-by-country" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="easy-test-personalities-by-country">Easy Test: Personalities By Country</h2>
<p>The easy test asks us to do an exercise from the <a href="https://rcdata.nau.edu/genomic-ml/animint2-manual/Ch00-preface.html"><code>animint2</code> Manual</a>. Or,</p>
<blockquote class="blockquote">
<p>Even better: use animint2 to visualize some data from your domain of expertise.</p>
</blockquote>
<p>So let’s take a look at some psychometrics.</p>
<section id="data-wrangling" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="data-wrangling">Data Wrangling</h3>
<div class="page-columns page-full"><p>Many psychological datasets have strict rules regarding their use. Luckily, The Open-Source Psychometrics Project has graced us with <a href="https://openpsychometrics.org/_rawdata/">an abundance of personality data</a>. I’ve elected to use the Big Five dataset.  The dataset has data on participants’ age, race, and gender (among other things). But for the purposes of this test, I’ll limit myself to item responses by country and drop the other data:</p><div class="no-row-height column-margin column-container"><span class="">The Big Five is otherwise known as the five-factor model of personality.</span></div></div>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>b5 <span class="ot">&lt;-</span> <span class="fu">read_tsv</span>(<span class="st">"b5.tsv"</span>,</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>               <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>go_away <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"race"</span>, <span class="st">"age"</span>, <span class="st">"engnat"</span>, <span class="st">"gender"</span>, <span class="st">"hand"</span>, <span class="st">"source"</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>b5c <span class="ot">&lt;-</span> b5 <span class="sc">|&gt;</span> <span class="fu">select</span>(<span class="sc">-</span><span class="fu">any_of</span>(go_away))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="page-columns page-full"><p>How many countries are there in this dataset, anyway? And what about the number of responses per country? </p><div class="no-row-height column-margin column-container"><span class=""><code>"(nu"</code> is equivalent to <code>NA</code>.</span></div></div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>num_country <span class="ot">&lt;-</span> b5c <span class="sc">|&gt;</span> <span class="fu">count</span>(country, <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>(country <span class="sc">==</span> <span class="st">"(nu"</span>))</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>num_country</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 157 × 2
   country     n
   &lt;chr&gt;   &lt;int&gt;
 1 US       8753
 2 GB       1531
 3 IN       1463
 4 AU        974
 5 CA        924
 6 PH        649
 7 IT        277
 8 MY        247
 9 PK        222
10 DE        191
# … with 147 more rows</code></pre>
</div>
</div>
<p>That’s a lot of countries, and most of them have very few responses. Generalizability is affected if <em>n</em> is too small, so I’m going to somewhat arbitrarily keep the six countries with the largest sample sizes and drop the rest. Sorry, Italy.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>six_countries <span class="ot">&lt;-</span> b5c <span class="sc">|&gt;</span> <span class="fu">filter</span>(country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"US"</span>, <span class="st">"GB"</span>, <span class="st">"IN"</span>, <span class="st">"AU"</span>, <span class="st">"CA"</span>, <span class="st">"PH"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="page-columns page-full"><p>Lastly, the individual item responses aren’t especially useful to me.  So I’m going to generate sumscores for each of the five personality factors and use that instead for the interactive visualization.</p><div class="no-row-height column-margin column-container"><span class="">Individual items are useful for estimating psychometric networks. But as far as I can tell, <code>animint2</code> doesn’t support them.</span></div></div>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># add id column</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>plus_id <span class="ot">&lt;-</span> <span class="fu">rowid_to_column</span>(six_countries, <span class="st">"id"</span>) <span class="sc">|&gt;</span> <span class="fu">rowwise</span>(id)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># generate columns of sumscores</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>plus_sumscores <span class="ot">&lt;-</span> plus_id <span class="sc">|&gt;</span> </span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">extraversion =</span> <span class="fu">sum</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">"E"</span>))),</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">neuroticism =</span> <span class="fu">sum</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">"N"</span>))),</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">agreeableness =</span> <span class="fu">sum</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">"A"</span>))),</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">conscientiousness =</span> <span class="fu">sum</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">"C"</span>, <span class="at">ignore.case =</span> <span class="cn">FALSE</span>))),</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">openness =</span> <span class="fu">sum</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">"O"</span>))),</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>         )</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="co"># remove individual items</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>sumscores <span class="ot">&lt;-</span> plus_sumscores <span class="sc">|&gt;</span> </span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, country, extraversion<span class="sc">:</span>openness)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>And now we have our final dataset:</p>
<div class="cell column-page-inset-right">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>sumscores</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 14,294 × 7
# Rowwise:  id
      id country extraversion neuroticism agreeableness conscientiousn…¹ openn…²
   &lt;int&gt; &lt;chr&gt;          &lt;dbl&gt;       &lt;dbl&gt;         &lt;dbl&gt;            &lt;dbl&gt;   &lt;dbl&gt;
 1     1 US                32          19            32               31      31
 2     2 US                28          29            31               28      26
 3     3 US                26          32            40               26      22
 4     4 US                28          32            34               37      35
 5     5 US                32          25            37               30      29
 6     6 IN                35          19            31               30      30
 7     7 US                31          37            33               35      37
 8     8 US                29          33            27               32      33
 9     9 IN                32          28            37               34      34
10    10 US                30          29            32               33      31
# … with 14,284 more rows, and abbreviated variable names ¹​conscientiousness,
#   ²​openness</code></pre>
</div>
</div>
</section>
<section id="big-five-data-viz" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="big-five-data-viz">Big Five Data Viz</h3>
<p>Now that our data are cleaned, let’s explore.</p>
<div class="cell page-columns page-full">

<div class="no-row-height column-margin column-container"><div class="cell-output-display">

<table class=" lightable-paper" style="font-family: Roboto Condensed; width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> Code </th>
   <th style="text-align:left;"> Country </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> AU </td>
   <td style="text-align:left;"> Australia </td>
  </tr>
  <tr>
   <td style="text-align:left;"> CA </td>
   <td style="text-align:left;"> Canada </td>
  </tr>
  <tr>
   <td style="text-align:left;"> GB </td>
   <td style="text-align:left;"> United Kingdom </td>
  </tr>
  <tr>
   <td style="text-align:left;"> IN </td>
   <td style="text-align:left;"> India </td>
  </tr>
  <tr>
   <td style="text-align:left;"> PH </td>
   <td style="text-align:left;"> Philippines </td>
  </tr>
  <tr>
   <td style="text-align:left;"> US </td>
   <td style="text-align:left;"> United States </td>
  </tr>
</tbody>
</table>

</div></div></div>
<p>We have five personality traits and six countries. How do personality traits vary by country?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># limit redundancy</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>violinize <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="fu">geom_violin</span>(</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">draw_quantiles =</span> <span class="fu">c</span>(<span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>)), </span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>(),</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="cn">NULL</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>oc <span class="ot">&lt;-</span> sumscores <span class="sc">|&gt;</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> country, </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> openness))</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>oc <span class="sc">+</span> violinize</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

<div class="no-row-height column-margin column-container"><div class="cell-output-display">
<p><img src="index_files/figure-html/oc-1.png" class="img-fluid" width="672"></p>
</div></div></div>
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>cc <span class="ot">&lt;-</span> sumscores <span class="sc">|&gt;</span> </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> country, </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> conscientiousness))</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>cc <span class="sc">+</span> violinize</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

<div class="no-row-height column-margin column-container"><div class="cell-output-display">
<p><img src="index_files/figure-html/cc-1.png" class="img-fluid" width="672"></p>
</div></div></div>
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>ec <span class="ot">&lt;-</span> sumscores <span class="sc">|&gt;</span> </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> country, </span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> extraversion))</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>ec <span class="sc">+</span> violinize</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

<div class="no-row-height column-margin column-container"><div class="cell-output-display">
<p><img src="index_files/figure-html/ec-1.png" class="img-fluid" width="672"></p>
</div></div></div>
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>ac <span class="ot">&lt;-</span> sumscores <span class="sc">|&gt;</span> </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> country, </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> agreeableness))</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>ac <span class="sc">+</span> violinize</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

<div class="no-row-height column-margin column-container"><div class="cell-output-display">
<p><img src="index_files/figure-html/ac-1.png" class="img-fluid" width="672"></p>
</div></div></div>
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>nc <span class="ot">&lt;-</span> sumscores <span class="sc">|&gt;</span> </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> country, </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> neuroticism))</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>nc <span class="sc">+</span> violinize</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

<div class="no-row-height column-margin column-container"><div class="cell-output-display">
<p><img src="index_files/figure-html/nc-1.png" class="img-fluid" width="672"></p>
</div></div></div>
<p>There’s some limited differences between personality factors. The distribution of scores for neuroticism is unusually wide, and openness seems to be slightly higher than the other personality factors. I’m not sure why. Maybe it’s an artifact of the kinds of people attracted to the website. Personality science isn’t my specialty in psychology—I can only speculate.</p>
<p>It’s also impressive how similar the scores are between countries. Their median scores do not seriously differ.</p>
<div class="page-columns page-full"><p>Here’s another look at at the similarities between test scores: a density plot for agreeableness. In this plot, we can see the literal overlap between the distribution of test scores.  I’ll come back to the inter-country overlap later.</p><div class="no-row-height column-margin column-container"><span class="">Agreeableness refers to phenomena like the tendency for compliance and altruism.</span></div></div>
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>a_density <span class="ot">&lt;-</span> sumscores <span class="sc">|&gt;</span> </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> agreeableness,</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">color =</span> country,</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>                       <span class="at">fill =</span> country)) <span class="sc">+</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.1</span>)</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>a_density</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

<div class="no-row-height column-margin column-container"><div class="cell-output-display">
<p><img src="index_files/figure-html/density-plot-1.png" class="img-fluid" width="672"></p>
</div></div></div>
</section>
<section id="interacting-with-personality" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="interacting-with-personality">Interacting with Personality</h3>
<p>All right. Time for the most relevant part of the test: using <code>animint()</code> to showcase my data.</p>
<div class="page-columns page-full"><p>The factors in the five-factor model of personality are meant to be mostly independent from one another.<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> That partly means we don’t expect the factors, when plotted against one another, to have any particularly strong relationships. In contrast, if we obtain a Pearson’s <em>r</em> close to 1 or −1, it may be the case that the two factors are actually one.</p><div class="no-row-height column-margin column-container"><li id="fn2"><p><sup>2</sup>&nbsp;There are empirical and theoretical reasons to question this, but that’s outside the scope of the test. For further reading, see:</p>
<ul>
<li>D. Borsboom. <a href="https://link.springer.com/10.1007/s11336-006-1447-6">The attack of the psychometricians</a>. <em>Psychometrika.</em> 2006.</li>
<li>D. van der Linden et al.&nbsp;<a href="doi.org/10.1016/j.jrp.2010.03.003">The general factor of personality</a>. <em>J. Res. Pers.</em> 2010.</li>
</ul>
</li></div></div>
<!-- footnote -->
<!-- /footnote -->
<p>What do the data show?</p>
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>correlations <span class="ot">&lt;-</span> sumscores <span class="sc">|&gt;</span> </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> conscientiousness,</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">y =</span> extraversion,</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>                       <span class="at">color =</span> country))</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>corr <span class="ot">&lt;-</span> correlations <span class="sc">+</span> <span class="fu">geom_jitter</span>(<span class="at">alpha =</span> <span class="fl">0.25</span>)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>ani_corr <span class="ot">&lt;-</span> <span class="fu">animint</span>(corr)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>ani_corr<span class="sc">$</span>first <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">country =</span> <span class="st">"US"</span>)</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>ani_corr</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>mapping: x = conscientiousness, y = extraversion, colour = country, showSelectedlegendcolour = country 
geom_point: na.rm = FALSE
stat_identity: na.rm = FALSE
position_jitter </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in f(...): showSelected only works with position=identity, problem:
geom1_point_corr</code></pre>
</div>
<div id="fig-personality-us" class="quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="figure page-columns page-full">
<script type="text/javascript" src="figpersonalityus/vendor/d3.v3.js"></script>
<script type="text/javascript" src="figpersonalityus/animint.js"></script>
<script type="text/javascript" src="figpersonalityus/vendor/jquery-1.11.3.min.js"></script>
<script type="text/javascript" src="figpersonalityus/vendor/selectize.min.js"></script>
<link rel="stylesheet" type="text/css" href="figpersonalityus/vendor/selectize.css">
<p>
</p>
<div id="figpersonalityus">

</div>
<script>var figpersonalityus = new animint("#figpersonalityus", "figpersonalityus/plot.json");</script>
<p></p><figcaption class="figure-caption margin-caption">Figure&nbsp;1: The US’s data seriously overlap with other countries’.</figcaption><p></p>
</figure>
</div>
</div>
<div class="page-columns page-full"><p>Here, extraversion is plotted against conscientiousness.  The United States is the only country currently plotted. Clicking on other countries plots their data and shows that aforementioned overlap between countries. I’ve also made the data points semi-transparent so the data density is visible.</p><div class="no-row-height column-margin column-container"><span class="">Extraversion refers to phenomena like outgoingness, while conscientiousness refers to phenomena like diligence.</span></div></div>
<p>I haven’t bothered to do any statistics. But at first glance, it seems like these data are consistent with the five-factor model. Outliers distort our hypothetical regression line and render <span class="math inline">\(r &gt; 0\)</span>, but if we zoom in where the data are most dense, perhaps even that fluke of a pattern will fade.</p>
<p>Let’s see if that’s true.</p>
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>corr_densed <span class="ot">&lt;-</span> corr <span class="sc">+</span> </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="dv">20</span>, <span class="dv">40</span>) <span class="sc">+</span> </span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">20</span>, <span class="dv">40</span>)</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>ani_corr_zoom <span class="ot">&lt;-</span> <span class="fu">animint</span>(corr_densed)</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>ani_corr_zoom<span class="sc">$</span>first <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">country =</span> <span class="st">"PH"</span>)</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>ani_corr_zoom</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>mapping: x = conscientiousness, y = extraversion, colour = country, showSelectedlegendcolour = country 
geom_point: na.rm = FALSE
stat_identity: na.rm = FALSE
position_jitter </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in f(...): showSelected only works with position=identity, problem:
geom1_point_corrdensed</code></pre>
</div>
<div id="fig-personality-ph" class="quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="figure page-columns page-full">
<p>
</p>
<div id="figpersonalityph">

</div>
<script>var figpersonalityph = new animint("#figpersonalityph", "figpersonalityph/plot.json");</script>
<p></p><figcaption class="figure-caption margin-caption">Figure&nbsp;2: There seems to be no relationship between the two factors.</figcaption><p></p>
</figure>
</div>
</div>
<p>This time I’ve opted to show the Philippines, the country with the sparsest data. The data do seem to be pretty patternless. Furthermore, as you add more countries—or just the United States—the discrete nature of the data becomes visible even with jittered points. (The sumscores can only be integers.)</p>
<p>And, of course, it’s immediately obvious without jitter. Last interactive scatterplot of the easy test:</p>
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>corr_discrete <span class="ot">&lt;-</span> correlations <span class="sc">+</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.25</span>) <span class="sc">+</span> </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="dv">20</span>, <span class="dv">40</span>) <span class="sc">+</span> </span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">20</span>, <span class="dv">40</span>)</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="fu">animint</span>(corr_discrete)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="fig-personality-discrete" class="quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="figure page-columns page-full">
<p>
</p>
<div id="figpersonalitydiscrete">

</div>
<script>var figpersonalitydiscrete = new animint("#figpersonalitydiscrete", "figpersonalitydiscrete/plot.json");</script>
<p></p><figcaption class="figure-caption margin-caption">Figure&nbsp;3: The discrete nature of the Big Five data.</figcaption><p></p>
</figure>
</div>
</div>
<p>Pretty cool! Being able to explore and present this kind of research would be harder without the interactive benefits of <code>animint2</code>.</p>
</section>
<section id="sibling-rivalry" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="sibling-rivalry">Sibling Rivalry</h3>
<p>The second part of the easy test asks me to</p>
<blockquote class="blockquote">
<p>Show an example of an error that you see when animint2 is loaded/attached at the same time as standard ggplot2.</p>
</blockquote>
<p>There’s no conflict with just loading the packages:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(animint2)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>But R throws up an error message when you run code that uses that syntax. As a quick example, I’ll load up a toy dataset and try to generate a bar chart.</p>
<div class="cell">

</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>cat_pop <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"meow.csv"</span>,</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">show_col_types =</span> <span class="cn">FALSE</span>)</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>cat_bar <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> cat_pop, </span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>                  <span class="at">mapping =</span> <span class="fu">aes</span>(cat_name, popularity)) <span class="sc">+</span> </span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">color =</span> purple)</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>cat_bar</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>What happens?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-overflow-wrap code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>Warning<span class="sc">:</span> Incompatible <span class="fu">methods</span> (<span class="st">"+.gganimint"</span>, <span class="st">"+.gg"</span>) <span class="cf">for</span> <span class="st">"+"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In other words, <code>animint2</code> and <code>ggplot2</code> don’t get along because their syntaxes overlap. Unloading or uninstalling one or the other gets rid of the problem and finally gives us our very important kitty bar chart.</p>
<div class="cell page-columns page-full">
<div class="cell-output-display page-columns page-full">
<div id="fig-cat-popularity" class="quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="index_files/figure-html/fig-cat-popularity-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><figcaption class="figure-caption margin-caption">Figure&nbsp;4: Popularity of cat names on a scale of 1–3.</figcaption><p></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="sec-observations" class="level2">
<h2 class="anchored" data-anchor-id="sec-observations">Appendix: Observations</h2>
<p>If I’m lucky, maybe I’ll become the change I want to see.</p>
<p><code>animint2</code> is a fork of <code>ggplot2</code>. While playing around with <code>animint2</code>, I noticed that this comes with some side effects:</p>
<ul>
<li><p><code>ggplot2</code> has <code>geom_col()</code>, but not <code>animint2</code>.</p></li>
<li><p><code>ggplot2</code> has <code>geom_boxplot()</code>, but not <code>animint2</code>.</p></li>
<li><p>An erroneous warning in <code>geom_violin</code> <a href="https://github.com/tidyverse/ggplot2/pull/4654">has been fixed</a> in <code>ggplot2</code> but not in <code>animint2</code>.</p></li>
<li><p>“<code>showSelected</code> does not work with <code>StatDensity</code>”—but I haven’t been able to find documentation about this anywhere. (Maybe I missed it.)</p></li>
<li><p>Extensions of <code>ggplot2</code>, like <code>patchwork</code>, don’t work for <code>animint2</code>.</p></li>
<li><p>multiple plots don’t work</p></li>
<li><p>“#| column: margin” and “fig-cap” don’t work well together</p></li>
</ul>
<p>-“fig-cap” appears differently ?</p>
<ul>
<li>“Error: Use of clickSelects and showSelected as aesthetics has been deprecated. Please use as parameters.”</li>
<li>“Warning: showSelected only works with position=identity”</li>
</ul>
<p><a href="https://rcdata.nau.edu/genomic-ml/animint2-manual/Ch07-limitations.html">Chapter 7</a> of the <code>animint2</code> Manual is also buggy and moves up by itself.</p>
</section>
<section id="appendix-mistakes" class="level2">
<h2 class="anchored" data-anchor-id="appendix-mistakes">Appendix: Mistakes</h2>
<p>Mistakes I made while doing these tests (and then subsequently caught). This list is not comprehensive and only records major mistakes.</p>
<section id="easy-test" class="level3">
<h3 class="anchored" data-anchor-id="easy-test">Easy Test</h3>
<p>My sumscores were erroneous, but it took me an embarassingly long time to notice and check. I first noticed that the openness sumscores were impossibly high—each sumscore has a ceiling of 50, which openness sumscores exceeded. I then</p>
</section>
</section>


</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>