<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Narcissus Looks Back</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="narcissus_files/libs/clipboard/clipboard.min.js"></script>
<script src="narcissus_files/libs/quarto-html/quarto.js"></script>
<script src="narcissus_files/libs/quarto-html/popper.min.js"></script>
<script src="narcissus_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="narcissus_files/libs/quarto-html/anchor.min.js"></script>
<link href="narcissus_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="narcissus_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="narcissus_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="narcissus_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="narcissus_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="changes.css">
</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Contents:</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#what-i-did" id="toc-what-i-did" class="nav-link" data-scroll-target="#what-i-did">What I Did</a>
  <ul class="collapse">
  <li><a href="#reference-website" id="toc-reference-website" class="nav-link" data-scroll-target="#reference-website">Reference Website</a></li>
  <li><a href="#todos-to-datasets" id="toc-todos-to-datasets" class="nav-link" data-scroll-target="#todos-to-datasets">TODOs to Datasets</a></li>
  <li><a href="#github-issues" id="toc-github-issues" class="nav-link" data-scroll-target="#github-issues">GitHub Issues</a></li>
  <li><a href="#failures" id="toc-failures" class="nav-link" data-scroll-target="#failures">Failures</a></li>
  </ul></li>
  <li><a href="#whats-missing" id="toc-whats-missing" class="nav-link" data-scroll-target="#whats-missing">What‚Äôs Missing</a></li>
  <li><a href="#what-i-learned" id="toc-what-i-learned" class="nav-link" data-scroll-target="#what-i-learned">What I Learned</a>
  <ul class="collapse">
  <li><a href="#theory-building-is-right" id="toc-theory-building-is-right" class="nav-link" data-scroll-target="#theory-building-is-right">Theory-Building is Right</a></li>
  <li><a href="#html-and-css-rock" id="toc-html-and-css-rock" class="nav-link" data-scroll-target="#html-and-css-rock">HTML and CSS Rock</a></li>
  <li><a href="#watch-for-typos" id="toc-watch-for-typos" class="nav-link" data-scroll-target="#watch-for-typos">Watch for Typos</a></li>
  </ul></li>
  <li><a href="#thank-you" id="toc-thank-you" class="nav-link" data-scroll-target="#thank-you">Thank You</a></li>
  <li><a href="#closing-thoughts" id="toc-closing-thoughts" class="nav-link" data-scroll-target="#closing-thoughts">Closing Thoughts</a></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
</div>
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Narcissus Looks Back</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="introduction" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<blockquote class="blockquote">
<p>Not knowing what he sees, he adores the sight;<br>
That false face fools and fuels his delight.<br>
You simple boy, why strive in vain to catch<br>
A fleeting image? What you see is nowhere;<br>
And what you love‚Äîbut turn away‚Äîyou lose!</p>
</blockquote>
<div class="page-columns page-full"><p>In Ovid‚Äôs <em>Metamorphoses</em>, a young hunter named Narcissus sees his reflection in a pool of water and falls in love with it. He can‚Äôt look away. He stares at the pool in longing till he withers away, dies, and transforms into a flower.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p><div class="no-row-height column-margin column-container"><li id="fn1"><p><sup>1</sup>&nbsp;Ovid. <em>Metamorphoses</em>. Translated by A. D. Melville. 1986.</p></li></div></div>
<p>From Narcissus we get ‚Äúnarcissism,‚Äù which is generally used to refer to excessive self-centeredness or selfishness. Narcissus seems an appropriate mascot for this essay. For this is an self-indulgent essay about what <em>I‚Äôve</em> done over GSOC 2023.</p>
<div class="page-columns page-full"><p>Don‚Äôt misunderstand. I love navel-gazing. This essay is also part of GSOC‚Äôs <a href="https://developers.google.com/open-source/gsoc/help/work-product">work product submission requirement</a>, so here we are. Enjoy.<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a></p><div class="no-row-height column-margin column-container"><li id="fn2"><p><sup>2</sup>&nbsp;Or don‚Äôt. I‚Äôm not your boss.</p></li></div></div>
</section>
<section id="what-i-did" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="what-i-did">What I Did</h2>
<section id="reference-website" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="reference-website">Reference Website</h3>
<div class="page-columns page-full"><p>My principal contribution was the construction of the <a href="https://animint.github.io/animint2/">animint2 reference website</a>.<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> I‚Äôm pretty proud of it. I wrote a <a href="https://animint.github.io/animint2/articles/animint2.html">quick start guide</a> to introduce people to <code>animint2</code>, <a href="https://animint.github.io/animint2/reference/index.html">organized and summarized <code>animint2</code>‚Äôs many functions</a>, re-wrote the <a href="https://animint.github.io/animint2/index.html">README</a>, and made other little changes to make the website comfortable and usable.</p><div class="no-row-height column-margin column-container"><li id="fn3"><p><sup>3</sup>&nbsp;See the <a href="https://github.com/animint/animint2/pull/105">pull request here</a>.</p></li></div></div>
<p>Making the website was exhausting in parts, but broadly it was a satisfying experience. I love making websites. I love HTML and CSS‚Äîthough I actually wrote very little HTML during this time, since the website was generated with <code>pkgdown</code>. Most of the HTML I wrote can be found in the quick start guide, intertwined with the Markdown that composes much of the document. This sacrifice of aesthetics was an unfortunate necessity. By themselves, Markdown and <code>pkgdown</code> just don‚Äôt have the power to do what I need.</p>
<div class="page-columns page-full"><p>The most technically challenging part of website-building was designing the code annotations and making them appear in the quick start guide.<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> Recall that <code>pkgdown</code> generates the website, which leaves me limited control over the HTML, which limited my options for code annotations. My workaround was to use R comments and then use CSS to make the comments appear like annotations. I also had to do a bit of CSS trickery to make ordered list markers appear like the code annotations.</p><div class="no-row-height column-margin column-container"><li id="fn4"><p><sup>4</sup>&nbsp;Credit to Toby for the code annotation idea. Thank you, Toby!</p></li></div></div>
</section>
<section id="todos-to-datasets" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="todos-to-datasets">TODOs to Datasets</h3>
<div class="page-columns page-full"><p>Honestly? This barely counts as a contribution. I‚Äôm just including it here for completeness. I noticed that sources and codebooks were missing from some of the dataset files. I documented all the files that were missing information. Then I added a bunch of TODO strings to those aforementioned files.<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a></p><div class="no-row-height column-margin column-container"><li id="fn5"><p><sup>5</sup>&nbsp;See the <a href="https://github.com/animint/animint2/pull/103">pull request here</a>.</p></li></div></div>
</section>
<section id="github-issues" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="github-issues">GitHub Issues</h3>
<div class="page-columns page-full"><p>I opened up a bunch of GitHub issues, thereby making work for future contributors of <code>animint2</code>. I‚Äôm creating jobs!<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a> Issues that are still open:</p><div class="no-row-height column-margin column-container"><li id="fn6"><p><sup>6</sup>&nbsp;Kidding. <span class="emoji" data-emoji="stuck_out_tongue">üòõ</span></p></li></div></div>
<ul>
<li><a href="https://github.com/animint/animint2/issues/90">Issue 90</a>: Observations on a Scrolling Bug. I noticed that pages with animated animints scroll upward on Firefox.</li>
<li><a href="https://github.com/animint/animint2/issues/106">Issue 106</a>: Animints Don‚Äôt Render Alt Text. I noticed that <code>{r fig.alt="foobar"}</code> worked for ggplots, but not for animints.</li>
</ul>
</section>
<section id="failures" class="level3">
<h3 class="anchored" data-anchor-id="failures">Failures</h3>
<p>Early on, I was tasked with closing <a href="https://github.com/animint/animint2/issues/89">issue 89</a>. I failed. It‚Äôs about removing <code>animint2</code>‚Äôs dependency on the <code>maptools</code> package.</p>
<p>I also never solved <a href="https://github.com/animint/animint2/issues/96">issue 96</a>, which I opened. It‚Äôs about <span class="math inline">\(\LaTeX\)</span> throwing up errors when I use <code>build.sh</code>. As far as I know, this issue has only ever affected me.</p>
</section>
</section>
<section id="whats-missing" class="level2">
<h2 class="anchored" data-anchor-id="whats-missing">What‚Äôs Missing</h2>
<p>This official title of this project is ‚ÄúThe animint2 Documentation and Bug Fix Project.‚Äù I‚Äôve only really done the former and have fixed zero bugs that were not of my own making.</p>
<p>During GSOC, I failed to make <code>animint2</code> a hexagon badge. I was planning on designing one near the end, but I ran out of time. This is the only part of the website that I‚Äôd say is truly missing.</p>
<p>Something that I would‚Äôve liked to do is automate the website rendering via GitHub Actions. Unfortunately, I don‚Äôt know how GitHub Actions works, and I didn‚Äôt have enough time to both learn about it and implement it.</p>
</section>
<section id="what-i-learned" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="what-i-learned">What I Learned</h2>
<section id="theory-building-is-right" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="theory-building-is-right">Theory-Building is Right</h3>
<div class="page-columns page-full"><p>When I first read Peter Naur‚Äôs paper on programming as theory-building, I thought it was a neat idea.<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a> My experience over GSOC has corroborated the theory, and I‚Äôve come to believe it.</p><div class="no-row-height column-margin column-container"><li id="fn7"><p><sup>7</sup>&nbsp;P. Naur. <a href="https://www.sciencedirect.com/science/article/abs/pii/0165607485900328">Programming as theory building</a>. <em>Microprocessing and Microprogramming</em>. 1985.</p></li></div></div>
<p>See: I built the <code>animint2</code> reference website over a period of about three months. I know it intimately. I know what every line of <code>_pkgdown.yml</code> and <code>pkgdown/extra.css</code> do. I know what I need to do to build the site right, and how to debug it when things go wrong. I‚Äôve built up a wealth of tacit knowledge‚Äîin Naur‚Äôs words, I‚Äôve developed a theory.</p>
<p>I‚Äôve tried my best to document everything. However, according to Naur, that‚Äôs not enough. This tacit knowledge cannot be communicated in writing. Nor is it present in the source code. It can only be communicated, indirectly, via mentorship.</p>
</section>
<section id="html-and-css-rock" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="html-and-css-rock">HTML and CSS Rock</h3>
<p>I‚Äôve also continued my path of becoming a curmudgeon with a distaste for frameworks that write HTML and CSS for me.</p>
<div class="page-columns page-full"><p>Don‚Äôt misunderstand me. Within bounds, these frameworks are wonderful and can save effort and time.<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a> I‚Äôm glad <code>pkgdown</code> exists‚Äîit would be a real pain if I had to write the HTML for every single function. <code>pandoc</code> saves me an enormous amount of time and effort.</p><div class="no-row-height column-margin column-container"><li id="fn8"><p><sup>8</sup>&nbsp;This website was built using Quarto, which spared me the effort of manually constructing HTML sidenotes.</p></li></div></div>
<p>But these abstractions also limit my control over how websites appear. Markdown was built for an older iteration of HTML, and it mixes semantics and appearances. When I italicize, it can‚Äôt know if I mean <code>&lt;em&gt;</code>, <code>&lt;i&gt;</code>, or <code>&lt;cite&gt;</code>. I also have concerns about accessibility. Problems with screenreader accessibility, for example, must be addressed via HTML‚Äîwhich I have limited control over.</p>
</section>
<section id="watch-for-typos" class="level3">
<h3 class="anchored" data-anchor-id="watch-for-typos">Watch for Typos</h3>
<p>Finally, I‚Äôve learned that typos cause a surprisingly large number of problems. If things aren‚Äôt working right, I ought to read my code again‚Äîcarefully and slowly. There just might be a missing quotation mark, whitespace, or bracket causing the issue.</p>
</section>
</section>
<section id="thank-you" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="thank-you">Thank You</h2>
<div class="page-columns page-full"><p>Thank you to Toby Hocking for accepting me as your mentee for GSOC 2023. Thank you also for mentoring me. I hope my work has repaid your confidence and your effort. I appreciate the independence I had to do this work, and I also liked the asynchronous communication structure we had in place. You were a great mentor to this cat-obsessed weirdo.<a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a></p><div class="no-row-height column-margin column-container"><li id="fn9"><p><sup>9</sup>&nbsp;In fact, you are arguably my first computer anything instructor.</p></li></div></div>
<p>Thank you to Yufan Fei for your advice and perspective. Between us, you are the more experienced, and you did this last year. I appreciate that you emailed me and said we ought to communicate. I‚Äôm thankful that we both did GSOC 2023 together.</p>
<p>Thank you to Faizan Khan for your help, especially at the beginning. I didn‚Äôt get to know you very well, but perhaps that will change in the future.</p>
</section>
<section id="closing-thoughts" class="level2">
<h2 class="anchored" data-anchor-id="closing-thoughts">Closing Thoughts</h2>
<p>In <a href="https://thephd.dev/seize-bits-production-gsoc-2019">Seizing the Bits of Production</a>, JeanHeyd Meneide summarizes his experience during GSOC 2019. In short: he did amazing work and met all his goals.</p>
<p>Being a less impressive person, I haven‚Äôt. But I think I‚Äôve done good work regardless. And you know what? That‚Äôs good enough for me.</p>
</section>


</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>